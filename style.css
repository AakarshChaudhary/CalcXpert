/* Base Styles */
:root {
    --bg-dark: #121212;
    --text-dark: #FFFFFF;
    --button-dark: #2A2D37;
    --button-darker: #1F2128;
    --blue: #4B5EFC;
    --blue-hover: #5A6AFF;
    --text-light-gray: #9E9E9E;
    --red: #FF5252;
    --red-hover: #FF7070;
    --red-dark: #E53935;
    --red-light: #FF8A80;
  
    --bg-light: #F1F1F1;
    --text-light: #121212;
    --button-light: #D9D9D9;
    --button-lighter: #E9E9E9;
  
    --glass-blur: 10px;
    --glass-opacity: 0.15;
    --button-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    --panel-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
  }
  
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, system-ui, sans-serif;
    -webkit-tap-highlight-color: transparent;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    will-change: transform, opacity;
  }
  
  body {
    background-color: var(--bg-dark);
    color: var(--text-dark);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background-color 0.3s ease, color 0.3s ease;
  }
  
  body.light-mode {
    background-color: var(--bg-light);
    color: var(--text-light);
  }
  
  /* App Container */
  .app-container {
    display: flex;
    position: relative;
    max-width: 400px;
    width: 100%;
    height: 100vh;
    max-height: 720px;
    overflow: hidden;
    padding: 1rem;
  }
  
  /* Title styles */
  .calcxpert-title {
    text-align: center;
    font-size: 1.75rem;
    font-weight: bold;
    margin-bottom: 1rem;
    color: white;
    letter-spacing: 2px;
    text-shadow: 0 0 8px rgba(255, 255, 255, 0.4);
    animation: title-float 3s ease-in-out infinite, title-glow 2s infinite;
    position: relative;
  }
  
  @keyframes title-float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-5px);
    }
  }
  
  @keyframes title-glow {
    0%, 100% {
      text-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
    }
    50% {
      text-shadow: 0 0 15px rgba(255, 255, 255, 0.5),
                   0 0 20px rgba(75, 94, 252, 0.4);
    }
  }
  
  .calcxpert-title::after {
    content: attr(data-text);
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    filter: blur(8px);
    opacity: 0.7;
    animation: title-pulse 2s infinite;
  }
  
  @keyframes title-pulse {
    0%, 100% {
      opacity: 0.7;
    }
    50% {
      opacity: 0.3;
    }
  }
  
  .light-mode .calcxpert-title {
    color: var(--blue);
    text-shadow: 0 0 10px rgba(75, 94, 252, 0.4);
    animation: light-title-glow 2s infinite;
  }
  
  @keyframes light-title-glow {
    0%, 100% {
      text-shadow: 0 0 8px rgba(75, 94, 252, 0.3);
    }
    50% {
      text-shadow: 0 0 15px rgba(75, 94, 252, 0.6),
                   0 0 20px rgba(75, 94, 252, 0.4);
    }
  }
  
  /* Calculator Container */
  .calculator-container {
    max-width: 500px;
    padding: 1.25rem 1.25rem 2rem;
    border-radius: 24px;
    background-color: rgba(30, 30, 35, 0.7);
    backdrop-filter: blur(var(--glass-blur));
    box-shadow: var(--panel-shadow);
    transition: all 0.3s ease;
    z-index: 10;
    position: relative;
    border: 2px solid rgba(255, 255, 255, 0.1);
    animation: border-glow 2s infinite;
    overflow: hidden;
  }
  
  @keyframes border-glow {
    0%, 100% {
      border-color: rgba(255, 255, 255, 0.1);
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.1),
                  inset 0 0 10px rgba(255, 255, 255, 0.1);
    }
    50% {
      border-color: rgba(255, 255, 255, 0.5);
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.3),
                  inset 0 0 20px rgba(255, 255, 255, 0.2);
    }
  }
  
  .light-mode .calculator-container {
    background-color: rgba(255, 255, 255, 0.8);
    border: 2px solid rgba(75, 94, 252, 0.1);
    animation: light-border-glow 2s infinite;
  }
  
  @keyframes light-border-glow {
    0%, 100% {
      border-color: rgba(75, 94, 252, 0.1);
      box-shadow: 0 0 10px rgba(75, 94, 252, 0.1),
                  inset 0 0 10px rgba(75, 94, 252, 0.1);
    }
    50% {
      border-color: rgba(75, 94, 252, 0.3);
      box-shadow: 0 0 20px rgba(75, 94, 252, 0.2),
                  inset 0 0 20px rgba(75, 94, 252, 0.1);
    }
  }
  
  .light-mode .calculator-display {
    animation: light-display-glow 2s infinite;
  }
  
  @keyframes light-display-glow {
    0%, 100% {
      border-color: rgba(75, 94, 252, 0.1);
      box-shadow: 0 0 10px rgba(75, 94, 252, 0.1);
    }
    50% {
      border-color: rgba(75, 94, 252, 0.3);
      box-shadow: 0 0 20px rgba(75, 94, 252, 0.2);
    }
  }
  
  .light-mode .calc-button {
    animation: light-button-glow 2s infinite;
  }
  
  @keyframes light-button-glow {
    0%, 100% {
      border-color: rgba(75, 94, 252, 0.1);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    50% {
      border-color: rgba(75, 94, 252, 0.2);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1),
                  0 0 15px rgba(75, 94, 252, 0.15);
    }
  }
  
  /* Header with Theme Toggle and History Button */
  .header-container {
    display: flex;
    justify-content: flex-start; /* Change from space-between to flex-start */
    align-items: center;
    margin-bottom: 1rem;
    gap: 12px; /* Add spacing between buttons */
    position: relative; /* To contain absolutely positioned elements */
    padding-right: 60px; /* Reserve space for history toggle button */
  }
  
  .theme-toggle,
  .history-toggle {
    background-color: var(--button-dark);
    width: 48px;
    height: 32px;
    border-radius: 16px;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 4px;
    cursor: pointer;
    position: relative;
    transition: all 0.3s ease;
    box-shadow: var(--button-shadow);
    overflow: hidden;
  }
  
  .theme-toggle::before,
  .history-toggle::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(255, 255, 255, 0);
    transition: background-color 0.3s ease;
    z-index: 0;
  }
  
  .theme-toggle:hover,
  .history-toggle:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
  }
  
  .theme-toggle:hover::before,
  .history-toggle:hover::before {
    background-color: rgba(255, 255, 255, var(--glass-opacity));
  }
  
  .theme-toggle:active,
  .history-toggle:active {
    transform: translateY(0);
  }
  
  .light-mode .theme-toggle,
  .light-mode .history-toggle {
    background-color: var(--button-light);
  }
  
  .theme-toggle {
    position: relative;
    overflow: hidden;
    background: linear-gradient(to right, #303F9F, #7B1FA2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    animation: toggle-glow 2s infinite;
  }
  
  @keyframes toggle-glow {
    0%, 100% {
      border-color: rgba(75, 94, 252, 0.4);
      box-shadow: 0 0 15px rgba(75, 94, 252, 0.3),
                  inset 0 0 12px rgba(75, 94, 252, 0.2);
    }
    50% {
      border-color: rgba(75, 94, 252, 0.6);
      box-shadow: 0 0 20px rgba(75, 94, 252, 0.4),
                  inset 0 0 15px rgba(75, 94, 252, 0.3);
    }
  }
  
  .light-mode .theme-toggle {
    background: linear-gradient(to right, #FF9800, #F57C00);
    border: 1px solid rgba(0, 0, 0, 0.05);
  }
  
  .toggle-circle {
    width: 20px;
    height: 20px;
    background-color: #464646;
    border-radius: 50%;
    position: absolute;
    left: 4px;
    top: 5px;
    transition: all 0.3s ease;
    box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.2), 0 2px 4px rgba(0, 0, 0, 0.3);
    z-index: 1;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M12 14C13.1046 14 14 13.1046 14 12C14 10.8954 13.1046 10 12 10V14Z'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M12 1C12.5523 1 13 1.44772 13 2V3C13 3.55228 12.5523 4 12 4C11.4477 4 11 3.55228 11 3V2C11 1.44772 11.4477 1 12 1ZM3 12C3 7.02944 7.02944 3 12 3C12.5523 3 13 3.44772 13 4C13 4.55228 12.5523 5 12 5C8.13401 5 5 8.13401 5 12C5 15.866 8.13401 19 12 19C15.866 19 19 15.866 19 12C19 11.4477 19.4477 11 20 11C20.5523 11 21 11.4477 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12ZM12 5C12.5523 5 13 5.44772 13 6V8C13 8.55228 12.5523 9 12 9C11.4477 9 11 8.55228 11 8V6C11 5.44772 11.4477 5 12 5ZM12 15C12.5523 15 13 15.4477 13 16V18C13 18.5523 12.5523 19 12 19C11.4477 19 11 18.5523 11 18V16C11 15.4477 11.4477 15 12 15ZM19.7782 4.2218C20.1687 4.6123 20.1687 5.24547 19.7782 5.63599L19.0711 6.34309C18.6805 6.73362 18.0474 6.73362 17.6568 6.34309C17.2663 5.95257 17.2663 5.31941 17.6568 4.92888L18.364 4.2218C18.7545 3.83127 19.3876 3.83127 19.7782 4.2218ZM6.34309 17.6568C6.73362 18.0474 6.73362 18.6805 6.34309 19.0711L5.63599 19.7782C5.24547 20.1687 4.6123 20.1687 4.2218 19.7782C3.83127 19.3876 3.83127 18.7545 4.2218 18.364L4.92888 17.6568C5.31941 17.2663 5.95257 17.2663 6.34309 17.6568ZM22 12C22 12.5523 21.5523 13 21 13H20C19.4477 13 19 12.5523 19 12C19 11.4477 19.4477 11 20 11H21C21.5523 11 22 11.4477 22 12ZM5 12C5 12.5523 4.55228 13 4 13H3C2.44772 13 2 12.5523 2 12C2 11.4477 2.44772 11 3 11H4C4.55228 11 5 11.4477 5 12ZM19.0711 17.6568C19.4616 18.0474 19.4616 18.6805 19.0711 19.0711C18.6805 19.4616 18.0474 19.4616 17.6568 19.0711L16.9497 18.364C16.5592 17.9734 16.5592 17.3403 16.9497 16.9497C17.3403 16.5592 17.9734 16.5592 18.364 16.9497L19.0711 17.6568ZM7.05026 6.34309C7.44078 5.95257 7.44078 5.31941 7.05026 4.92888C6.65973 4.53836 6.02657 4.53836 5.63604 4.92888L4.92893 5.63599C4.53841 6.02651 4.53841 6.65968 4.92893 7.0502C5.31946 7.44073 5.95262 7.44073 6.34315 7.0502L7.05026 6.34309Z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 16px;
  }
  
  .light-mode .toggle-circle {
    transform: translateX(24px);
    background-color: #FFD700;
    box-shadow: inset 0 0 0 2px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.1);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23333333' viewBox='0 0 24 24'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M18.3939 15.3938C16.7689 16.7227 14.5289 17.2466 12.3604 16.8151C10.1919 16.3835 8.33379 15.0384 7.19664 13.1111C6.05949 11.1838 5.76378 8.83951 6.37401 6.67C6.98423 4.5005 8.44864 2.70558 10.4407 1.74487C10.8153 1.5558 11.0191 1.13891 10.9517 0.731524C10.8842 0.324135 10.5597 0.00929443 10.1466 0.000970313C6.84518 -0.0364553 3.81326 1.21906 1.76474 3.40418C-0.588236 5.96635 -0.588018 9.90634 1.76474 13.1109C3.5019 15.5227 6.33326 17.0866 9.10012 17.4377C11.867 17.7889 14.9499 16.9571 17.2279 14.6789C18.9166 12.99 19.9039 10.7628 19.9996 8.39217C20.0201 8.01183 19.7795 7.67022 19.4102 7.55299C19.041 7.43576 18.6326 7.56877 18.3997 7.87638C17.1534 9.92669 14.8664 11.1583 12.5419 10.9323C10.2173 10.7063 8.20386 9.07199 7.38604 6.83162C7.22793 6.40145 7.52473 5.93661 7.97576 5.88855C9.22986 5.75723 10.4921 5.95887 11.6403 6.46766C12.7885 6.97645 13.7809 7.77457 14.5276 8.78486C15.2742 9.79516 15.7503 10.9811 15.9098 12.2298C16.0693 13.4785 15.9073 14.7481 15.4398 15.9199C15.3144 16.2187 15.3526 16.5641 15.5411 16.8291C15.7297 17.0942 16.0425 17.2442 16.3589 17.2252C16.6753 17.2062 16.9676 17.0202 17.1247 16.7366C18.146 14.9198 18.6321 12.8244 18.5167 10.7235C18.5115 10.6257 18.5091 10.5284 18.5091 10.4314C18.5091 10.2882 18.5159 10.1463 18.529 10.0059C18.684 8.24777 18.2305 6.48455 17.2281 5C19.5059 7.27776 20.3964 10.5141 19.5366 13.5344C19.3009 14.4455 18.9134 15.0139 18.3939 15.3938Z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: center;
    background-size: 14px;
  }
  
  .history-toggle {
    background: linear-gradient(135deg, var(--blue), #3D5AFE);
    border: 1px solid rgba(255, 255, 255, 0.1);
    animation: history-glow 2s infinite, history-bounce 5s infinite 1s;
    position: absolute;
    right: 0;
    top: 0;
    overflow: hidden;
    will-change: transform, box-shadow;
  }
  
  @keyframes history-glow {
    0%, 100% {
      border-color: rgba(75, 94, 252, 0.4);
      box-shadow: 0 0 15px rgba(75, 94, 252, 0.3),
                  inset 0 0 12px rgba(75, 94, 252, 0.2);
    }
    50% {
      border-color: rgba(75, 94, 252, 0.6);
      box-shadow: 0 0 20px rgba(75, 94, 252, 0.4),
                  inset 0 0 15px rgba(75, 94, 252, 0.3);
    }
  }
  
  @keyframes history-bounce {
    0%, 50%, 100% {
      transform: translateY(0) scale(1);
    }
    75% {
      transform: translateY(-2px) scale(1.05);
    }
    87.5% {
      transform: translateY(1px) scale(1.02);
    }
  }
  
  /* Shine effect for history toggle */
  .history-toggle::after {
    content: '';
    position: absolute;
    top: -100%;
    left: -100%;
    width: 300%;
    height: 300%;
    background: linear-gradient(
      to bottom right,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0) 40%,
      rgba(255, 255, 255, 0.4) 50%,
      rgba(255, 255, 255, 0) 60%,
      rgba(255, 255, 255, 0) 100%
    );
    transform: rotate(45deg) translateX(-100%) translateY(-100%);
    animation: history-toggle-shine 5s infinite 2s;
    z-index: 1;
    pointer-events: none;
  }
  
  @keyframes history-toggle-shine {
    0% {
      transform: rotate(45deg) translateX(-100%) translateY(-100%);
      opacity: 0;
    }
    10%, 20% {
      opacity: 0.5;
    }
    30% {
      transform: rotate(45deg) translateX(100%) translateY(100%);
      opacity: 0;
    }
    100% {
      opacity: 0;
    }
  }
  
  /* Active state (when history panel is open) */
  .show-history .history-toggle {
    background: linear-gradient(135deg, #5C6BC0, #3F51B5);
    animation: history-active-pulse 1.5s infinite;
    transform: scale(1.1);
  }
  
  @keyframes history-active-pulse {
    0%, 100% {
      box-shadow: 0 0 15px rgba(75, 94, 252, 0.3),
                  inset 0 0 12px rgba(75, 94, 252, 0.2);
    }
    50% {
      box-shadow: 0 0 25px rgba(75, 94, 252, 0.5),
                  inset 0 0 20px rgba(75, 94, 252, 0.4);
    }
  }
  
  .light-mode .history-toggle {
    background: linear-gradient(135deg, #42A5F5, #2196F3);
    border: 1px solid rgba(0, 0, 0, 0.05);
    animation: light-toggle-glow 2s infinite, history-bounce 5s infinite 1s;
  }
  
  .light-mode.show-history .history-toggle {
    background: linear-gradient(135deg, #1E88E5, #1976D2);
    animation: light-history-active-pulse 1.5s infinite;
    transform: scale(1.1);
  }
  
  @keyframes light-history-active-pulse {
    0%, 100% {
      box-shadow: 0 0 15px rgba(33, 150, 243, 0.3),
                  inset 0 0 12px rgba(33, 150, 243, 0.2);
    }
    50% {
      box-shadow: 0 0 25px rgba(33, 150, 243, 0.5),
                  inset 0 0 20px rgba(33, 150, 243, 0.4);
    }
  }
  
  @keyframes light-toggle-glow {
    0%, 100% {
      border-color: rgba(33, 150, 243, 0.2);
      box-shadow: 0 0 10px rgba(33, 150, 243, 0.1);
    }
    50% {
      border-color: rgba(33, 150, 243, 0.4);
      box-shadow: 0 0 15px rgba(33, 150, 243, 0.2);
    }
  }
  
  .history-toggle svg {
    position: relative;
    z-index: 2;
    width: 20px;
    height: 20px;
    color: white;
    transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    filter: drop-shadow(0 1px 3px rgba(0, 0, 0, 0.3));
  }
  
  .history-toggle:hover svg {
    transform: scale(1.2) rotate(15deg);
  }
  
  .show-history .history-toggle svg {
    transform: scale(1.2) rotate(180deg);
  }
  
  .light-mode .history-toggle svg {
    color: white;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
  }
  
  /* Calculator Display */
  .calculator-display {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    margin-bottom: 1.25rem;
    min-height: 112px;
    word-break: break-all;
    word-wrap: break-word;
    overflow: hidden;
    border-radius: 16px;
    background-color: rgba(20, 20, 25, 0.3);
    backdrop-filter: blur(var(--glass-blur));
    padding: 1.25rem;
    box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(60, 60, 70, 0.4);
    transition: all 0.3s ease;
    position: relative;
    z-index: 1;
    animation: display-glow 2s infinite;
  }
  
  @keyframes display-glow {
    0%, 100% {
      border-color: rgba(255, 255, 255, 0.1);
      box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.15),
                  0 0 10px rgba(255, 255, 255, 0.1);
    }
    50% {
      border-color: rgba(255, 255, 255, 0.3);
      box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.15),
                  0 0 20px rgba(255, 255, 255, 0.2);
    }
  }
  
  /* Add decorative elements to display */
  .calculator-display::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg,
        rgba(75, 94, 252, 0) 0%,
        rgba(75, 94, 252, 0.3) 50%,
        rgba(75, 94, 252, 0) 100%);
    opacity: 0.5;
    z-index: 0;
  }
  
  .calculator-display::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at top right,
        rgba(75, 94, 252, 0.05),
        transparent 70%);
    z-index: -1;
    opacity: 0;
    transition: opacity 0.5s ease;
  }
  
  .calculator-display:hover::after {
    opacity: 1;
  }
  
  /* Animation when calculation result is added to history */
  @keyframes result-highlight {
  
    0%,
    100% {
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
      border-color: rgba(60, 60, 70, 0.4);
    }
  
    50% {
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1), 0 0 15px rgba(75, 94, 252, 0.3);
      border-color: rgba(75, 94, 252, 0.4);
      transform: translateY(-2px);
    }
  }
  
  .calculator-display.highlight-result {
    animation: result-highlight 0.8s cubic-bezier(0.25, 1, 0.5, 1);
  }
  
  .light-mode .calculator-display {
    background-color: rgba(255, 255, 255, 0.3);
    border-color: rgba(200, 200, 205, 0.4);
  }
  
  .light-mode .calculator-display.highlight-result {
    animation: result-highlight 0.8s cubic-bezier(0.25, 1, 0.5, 1);
  }
  
  /* Expression animation */
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(-5px);
      filter: blur(2px);
    }
  
    to {
      opacity: 1;
      transform: translateY(0);
      filter: blur(0);
    }
  }
  
  @keyframes fade-out-up {
    from {
      opacity: 1;
      transform: translateY(0);
      filter: blur(0);
    }
  
    to {
      opacity: 0;
      transform: translateY(-10px);
      filter: blur(3px);
    }
  }
  
  .old-result {
    animation: fade-out-up 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    position: absolute;
    z-index: 5;
  }
  
  @keyframes text-glow {
    0% {
      text-shadow: 0 0 8px rgba(75, 94, 252, 0);
    }
  
    50% {
      text-shadow: 0 0 14px rgba(75, 94, 252, 0.4);
    }
  
    100% {
      text-shadow: 0 0 8px rgba(75, 94, 252, 0);
    }
  }
  
  @keyframes result-appear {
    0% {
      transform: scale(0.9);
      opacity: 0;
      filter: blur(3px);
    }
    30% {
      filter: blur(1px);
    }
    100% {
      transform: scale(1);
      opacity: 1;
      filter: blur(0);
    }
  }
  
  .expression {
    color: var(--text-light-gray);
    font-size: 1.125rem;
    margin-bottom: 0.5rem;
    min-height: 1.5rem;
    font-weight: 400;
    max-width: 100%;
    text-align: right;
    transition: all 0.3s ease;
    padding: 4px 0;
    letter-spacing: 0.5px;
    font-family: 'Courier New', monospace;
    position: relative;
    animation: fade-in 0.3s ease-out;
  }
  
  /* Blue highlight for operators */
  .operator-highlight {
    color: var(--blue);
    font-weight: 700;
    animation: fade-in 0.3s ease-out;
    position: relative;
    margin: 0 2px;
  }
  
  .operator-highlight.equals {
    display: inline;
    margin-left: 4px;
    margin-right: 4px;
    color: var(--blue);
    font-weight: 500;
    background: transparent !important;
    pointer-events: none;
    -webkit-background-clip: initial;
    -webkit-text-fill-color: var(--blue);
  }
  
  .result {
    font-size: 2.5rem;
    font-weight: 500;
    width: 100%;
    text-align: right;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    background: linear-gradient(to right, var(--text-dark), var(--blue-hover));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: text-glow 2s infinite;
    letter-spacing: 1px;
    padding: 4px 0;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
  }
  
  .new-result {
    animation: result-appear 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards, text-glow 2s infinite 0.5s;
  }
  
  .light-mode .result {
    background: linear-gradient(to right, var(--text-light), var(--blue));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  
  /* Calculator Grid */
  .calculator-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-gap: 12px;
    width: 100%;
    padding: 8px 0;
    margin: 0 auto;
  }
  
  /* Calculator Buttons */
  .calc-button {
    width: 100%;
    width: 64px;
    height: 64px;
    border-radius: 16px;
    border: none;
    font-size: 1.55rem;
    font-weight: 600;
    color: var(--text-dark);
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    box-shadow: var(--button-shadow);
    backdrop-filter: blur(var(--glass-blur));
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(255, 255, 255, 0.05);
    animation: button-glow 2s infinite;
    margin: 0;
  }
  
  @keyframes button-glow {
    0%, 100% {
      border-color: rgba(255, 255, 255, 0.05);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    50% {
      border-color: rgba(255, 255, 255, 0.2);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1),
                  0 0 15px rgba(255, 255, 255, 0.1);
    }
  }
  
  .light-mode .calc-button {
    border: 1px solid rgba(0, 0, 0, 0.05);
  }
  
  /* Create the shine effect element */
  .calc-button::before {
    content: "";
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(to bottom right,
        rgba(255, 255, 255, 0) 0%,
        rgba(255, 255, 255, 0) 40%,
        rgba(255, 255, 255, 0.3) 50%,
        rgba(255, 255, 255, 0) 60%,
        rgba(255, 255, 255, 0) 100%);
    transition: transform 0.6s ease;
    transform: translateX(-100%) translateY(-100%) rotate(35deg);
    pointer-events: none;
    z-index: 2;
  }
  
  /* Create the hover glow effect element */
  .calc-button::after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(255, 255, 255, 0);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
    border-radius: 16px;
    z-index: 0;
  }
  
  .calc-button:hover {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
  }
  
  /* Activate the shine effect on hover */
  .calc-button:hover::before {
    transform: translateX(100%) translateY(100%) rotate(35deg);
  }
  
  /* Activate the glow effect on hover */
  .calc-button:hover::after {
    background-color: rgba(255, 255, 255, var(--glass-opacity));
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.1) inset;
  }
  
  .light-mode .calc-button:hover::after {
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.05) inset;
  }
  
  /* Button animations */
  @keyframes button-press {
    0% {
      transform: translateY(0) scale(1);
      box-shadow: var(--button-shadow);
    }
  
    40% {
      transform: translateY(3px) scale(0.92);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
  
    70% {
      transform: translateY(1px) scale(0.96);
    }
  
    100% {
      transform: translateY(0) scale(1);
      box-shadow: var(--button-shadow);
    }
  }
  
  @keyframes button-glow {
    0% {
      box-shadow: 0 0 5px rgba(75, 94, 252, 0.3), var(--button-shadow);
    }
    50% {
      box-shadow: 0 0 15px rgba(75, 94, 252, 0.5), var(--button-shadow);
    }
    100% {
      box-shadow: 0 0 5px rgba(75, 94, 252, 0.3), var(--button-shadow);
    }
  }
  
  @keyframes equals-press {
    0% {
      transform: translateY(0) scale(1);
      box-shadow: var(--button-shadow);
    }
  
    30% {
      transform: translateY(4px) scale(0.92);
      box-shadow: 0 3px 5px rgba(0, 0, 0, 0.15);
    }
  
    60% {
      transform: translateY(-2px) scale(1.04);
      box-shadow: 0 12px 20px rgba(61, 90, 254, 0.3);
    }
  
    80% {
      transform: translateY(0) scale(1.02);
    }
  
    100% {
      transform: translateY(0) scale(1);
      box-shadow: var(--button-shadow);
    }
  }
  
  .calc-button.button-pressed {
    animation: button-press 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }
  
  .calc-button.button-pressed::before {
    opacity: 1;
    transform: scale(1.1);
    transition: transform 0.2s, opacity 0.2s;
  }
  
  .calc-button.equals-pressed {
    animation: equals-press 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
  }
  
  .equals.equals-pressed::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 16px;
    background: radial-gradient(circle at center, rgba(255, 255, 255, 0.8), transparent 70%);
    opacity: 0;
    animation: ripple 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    z-index: 1;
    pointer-events: none;
  }
  
  @keyframes ripple {
    0% {
      opacity: 0.5;
      transform: scale(0.1);
    }
    50% {
      opacity: 0.3;
    }
    100% {
      opacity: 0;
      transform: scale(2);
    }
  }
  
  .calc-button:active {
    animation: button-glow 0.6s;
    transform: translateY(2px) scale(0.96);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: all 0.1s ease;
  }
  
  .calc-button>* {
    position: relative;
    z-index: 1;
  }
  
  .light-mode .calc-button {
    color: var(--text-light);
    position: relative;
    overflow: hidden;
  }
  
  .light-mode .calc-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, 
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0.1) 20%, 
      rgba(255, 255, 255, 0.3) 50%, 
      rgba(255, 255, 255, 0.1) 80%, 
      rgba(255, 255, 255, 0) 100%);
    opacity: 0;
    transition: opacity 0.5s, transform 0.7s;
    z-index: 1;
    transform: translateX(-100%) translateY(-100%) rotate(35deg);
  }
  
  .light-mode .calc-button:hover::before {
    opacity: 1;
    transform: translateX(100%) translateY(100%) rotate(35deg);
  }
  
  @keyframes light-mode-button-press {
    0% {
      transform: translateY(0) scale(1);
      box-shadow: var(--button-shadow);
      background-color: var(--button-lighter);
    }
    40% {
      transform: translateY(3px) scale(0.92);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      background-color: #E8EAF6;
    }
    70% {
      transform: translateY(1px) scale(0.96);
      background-color: #F5F5F5;
    }
    100% {
      transform: translateY(0) scale(1);
      box-shadow: var(--button-shadow);
      background-color: var(--button-lighter);
    }
  }
  
  .light-mode .calc-button.button-pressed {
    animation: light-mode-button-press 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }
  
  @keyframes light-operator-press {
    0% {
      transform: translateY(0) scale(1);
      box-shadow: var(--button-shadow);
    }
    40% {
      transform: translateY(3px) scale(0.92);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      background: linear-gradient(135deg, #1E88E5, #1976D2);
    }
    70% {
      transform: translateY(1px) scale(0.96);
      background: linear-gradient(135deg, #2196F3, #1E88E5);
    }
    100% {
      transform: translateY(0) scale(1);
      box-shadow: var(--button-shadow);
    }
  }
  
  @keyframes light-danger-press {
    0% {
      transform: translateY(0) scale(1);
      box-shadow: var(--button-shadow);
    }
    40% {
      transform: translateY(3px) scale(0.92);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      background: linear-gradient(135deg, #EF5350, #E57373);
    }
    70% {
      transform: translateY(1px) scale(0.96);
      background: linear-gradient(135deg, #F44336, #EF5350);
    }
    100% {
      transform: translateY(0) scale(1);
      box-shadow: var(--button-shadow);
    }
  }
  
  .number,
  .function {
    background-color: var(--button-darker);
  }
  
  .light-mode .number,
  .light-mode .function {
    background-color: var(--button-lighter);
  }
  
  .operation {
    background: linear-gradient(135deg, var(--blue), #3D5AFE);
    color: white;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    font-weight: 700;
    animation: operator-glow 2s infinite;
  }
  
  @keyframes operator-glow {
    0%, 100% {
      border-color: rgba(75, 94, 252, 0.2);
      box-shadow: 0 0 10px rgba(75, 94, 252, 0.1);
    }
    50% {
      border-color: rgba(75, 94, 252, 0.5);
      box-shadow: 0 0 20px rgba(75, 94, 252, 0.3);
    }
  }
  
  @keyframes operator-pulse {
    0% {
      transform: scale(1);
      box-shadow: 0 4px 8px rgba(75, 94, 252, 0.2);
    }
    50% {
      transform: scale(1.05);
      box-shadow: 0 6px 15px rgba(75, 94, 252, 0.4);
    }
    100% {
      transform: scale(1);
      box-shadow: 0 4px 8px rgba(75, 94, 252, 0.2);
    }
  }
  
  @keyframes operator-press {
    0% {
      transform: translateY(0) scale(1);
      box-shadow: var(--button-shadow);
    }
    40% {
      transform: translateY(3px) scale(0.92);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      background: linear-gradient(135deg, #3949AB, #303F9F);
    }
    70% {
      transform: translateY(1px) scale(0.96);
      background: linear-gradient(135deg, #3F51B5, #3949AB);
    }
    100% {
      transform: translateY(0) scale(1);
      box-shadow: var(--button-shadow);
    }
  }
  
  .light-mode .operation {
    color: white;
    background: linear-gradient(135deg, #42A5F5, var(--blue));
    text-shadow: none;
  }
  
  .light-mode .operation.equals {
    background: none;
    color: var(--blue);
  }
  
  .operation:hover {
    background: linear-gradient(135deg, var(--blue-hover), #536DFE);
    box-shadow: 0 10px 20px rgba(59, 89, 255, 0.2);
  }
  
  .light-mode .operation:hover {
    background: linear-gradient(135deg, #64B5F6, #4FC3F7);
  }
  
  .equals {
    background: linear-gradient(135deg, #4A5CFF, #3D5AFE);
    font-size: 1.5rem;
    font-weight: 700;
  }
  
  .equals:hover {
    background: linear-gradient(135deg, #536DFE, #5C6BC0);
    box-shadow: 0 10px 20px rgba(61, 90, 254, 0.25);
  }
  
  .light-mode .equals {
    background: linear-gradient(135deg, #2196F3, #1976D2);
  }
  
  .light-mode .equals:hover {
    background: linear-gradient(135deg, #42A5F5, #2196F3);
  }
  
  /* Red buttons (clear and backspace) */
  .function[data-action="clear"],
  .function[data-action="backspace"] {
    background: linear-gradient(135deg, var(--red), #E53935);
    color: white;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    font-weight: 700;
    animation: danger-glow 2s infinite;
  }
  
  /* Fixed positioning to ensure buttons are properly placed */
  .clear-btn {
    position: relative;
    left: 0;
    z-index: 1;
  }
  
  .backspace-btn {
    position: relative;
    right: 0;
    z-index: 1;
  }
  
  @keyframes danger-glow {
    0%, 100% {
      border-color: rgba(255, 82, 82, 0.2);
      box-shadow: 0 0 10px rgba(255, 82, 82, 0.1);
    }
    50% {
      border-color: rgba(255, 82, 82, 0.5);
      box-shadow: 0 0 20px rgba(255, 82, 82, 0.3);
    }
  }
  
  @keyframes danger-pulse {
    0% {
      transform: scale(1);
      box-shadow: 0 4px 8px rgba(244, 67, 54, 0.2);
    }
    50% {
      transform: scale(1.05);
      box-shadow: 0 6px 15px rgba(244, 67, 54, 0.4);
    }
    100% {
      transform: scale(1);
      box-shadow: 0 4px 8px rgba(244, 67, 54, 0.2);
    }
  }
  
  @keyframes danger-press {
    0% {
      transform: translateY(0) scale(1);
      box-shadow: var(--button-shadow);
    }
    40% {
      transform: translateY(3px) scale(0.92);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      background: linear-gradient(135deg, #D32F2F, #B71C1C);
    }
    70% {
      transform: translateY(1px) scale(0.96);
      background: linear-gradient(135deg, #E53935, #C62828);
    }
    100% {
      transform: translateY(0) scale(1);
      box-shadow: var(--button-shadow);
    }
  }
  
  .light-mode .function[data-action="clear"],
  .light-mode .function[data-action="backspace"] {
    background: linear-gradient(135deg, var(--red-light), var(--red));
    color: white;
    text-shadow: none;
  }
  
  .function[data-action="clear"]:hover,
  .function[data-action="backspace"]:hover {
    background: linear-gradient(135deg, var(--red-hover), #F44336);
    box-shadow: 0 10px 20px rgba(244, 67, 54, 0.2);
  }
  
  .light-mode .function[data-action="clear"]:hover,
  .light-mode .function[data-action="backspace"]:hover {
    background: linear-gradient(135deg, #FFAB91, var(--red-light));
  }
  
  .calc-button svg {
    width: 24px;
    height: 24px;
  }
  
  /* History Panel */
  .history-panel {
    position: absolute;
    top: 0;
    right: -320px;
    width: 300px;
    height: 100%;
    background-color: rgba(30, 30, 35, 0.9);
    backdrop-filter: blur(var(--glass-blur));
    box-shadow: var(--panel-shadow);
    padding: 1.25rem;
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    z-index: 20;
    border-radius: 24px 0 0 24px;
    overflow: hidden;
    border-left: 1px solid rgba(255, 255, 255, 0.1);
    transform: translateX(0);
    animation: panel-border-glow 2s infinite;
    will-change: transform, opacity, box-shadow;
  }
  
  @keyframes panel-border-glow {
    0%, 100% {
      border-color: rgba(75, 94, 252, 0.2);
      box-shadow: -5px 0 15px rgba(75, 94, 252, 0.1);
    }
    50% {
      border-color: rgba(75, 94, 252, 0.4);
      box-shadow: -5px 0 20px rgba(75, 94, 252, 0.2);
    }
  }
  
  /* Panel background patterns and effects */
  .history-panel::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
      radial-gradient(circle at top right, 
        rgba(75, 94, 252, 0.15), 
        transparent 70%),
      radial-gradient(circle at bottom left, 
        rgba(75, 94, 252, 0.05), 
        transparent 60%);
    opacity: 0;
    transition: opacity 0.8s ease;
    z-index: -1;
  }
  
  .history-panel.show::before {
    opacity: 1;
  }
  
  .light-mode .history-panel {
    background-color: rgba(245, 245, 245, 0.95);
    border-left: 1px solid rgba(0, 0, 0, 0.05);
    box-shadow: -5px 0 25px rgba(75, 94, 252, 0.15);
    animation: light-panel-slide-in 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }
  
  @keyframes light-panel-slide-in {
    0% {
      transform: translateX(30px);
      opacity: 0.6;
      box-shadow: -15px 0 30px rgba(33, 150, 243, 0);
    }
    50% {
      box-shadow: -15px 0 30px rgba(33, 150, 243, 0.15);
    }
    100% {
      transform: translateX(0);
      opacity: 1;
      box-shadow: -5px 0 20px rgba(33, 150, 243, 0.1);
    }
  }
  
  .light-mode .history-panel::before {
    background: 
      radial-gradient(circle at top right, 
        rgba(33, 150, 243, 0.1), 
        transparent 70%),
      radial-gradient(circle at bottom left, 
        rgba(33, 150, 243, 0.05), 
        transparent 60%);
  }
  
  /* Animated background for history panel */
  .history-panel.animated-bg::before {
    animation: panel-bg-pulse 2s ease-in-out;
  }
  
  @keyframes panel-bg-pulse {
    0% {
      opacity: 0.2;
      background-position: 0% 0%;
    }
    50% {
      opacity: 1;
      background-position: 100% 100%;
    }
    100% {
      opacity: 0.2;
      background-position: 0% 0%;
    }
  }
  
  /* Enhanced panel entrance animation */
  .history-panel::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom,
      rgba(75, 94, 252, 0.1),
      transparent 20%,
      transparent 80%,
      rgba(75, 94, 252, 0.1)
    );
    z-index: -1;
    opacity: 0;
    transition: opacity 1s ease;
    border-radius: 24px 0 0 24px;
    pointer-events: none;
  }
  
  .light-mode .history-panel::after {
    background: linear-gradient(to bottom,
      rgba(33, 150, 243, 0.05),
      transparent 20%,
      transparent 80%,
      rgba(33, 150, 243, 0.05)
    );
  }
  
  .history-panel.show::after {
    opacity: 1;
    animation: panel-gradient-move 8s ease-in-out infinite;
  }
  
  @keyframes panel-gradient-move {
    0%, 100% {
      background-position: 0% 0%;
    }
    50% {
      background-position: 0% 100%;
    }
  }
  
  .history-panel.show {
    right: 0;
    animation: panel-slide-in 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275), panel-border-glow 2s infinite 0.5s;
  }
  
  @keyframes panel-slide-in {
    0% {
      transform: translateX(30px);
      opacity: 0.6;
      box-shadow: -15px 0 30px rgba(75, 94, 252, 0);
    }
    50% {
      box-shadow: -15px 0 30px rgba(75, 94, 252, 0.2);
    }
    100% {
      transform: translateX(0);
      opacity: 1;
      box-shadow: -5px 0 20px rgba(75, 94, 252, 0.1);
    }
  }
  
  @keyframes panel-emphasis {
    0%, 100% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.01);
    }
  }
  
  .history-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 0.5rem 1rem 0.25rem;
    border-bottom: 1px solid rgba(150, 150, 150, 0.2);
    margin-bottom: 1rem;
    position: relative;
    gap: 0.5rem;
  }
  
  /* Add a subtle shine line under history header */
  .history-header::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 10%;
    width: 80%;
    height: 1px;
    background: linear-gradient(
      to right,
      rgba(75, 94, 252, 0), 
      rgba(75, 94, 252, 0.3) 50%, 
      rgba(75, 94, 252, 0)
    );
    opacity: 0;
    transition: opacity 0.5s ease;
  }
  
  .history-panel.show .history-header::after {
    opacity: 1;
    animation: shine 3s infinite;
  }
  
  @keyframes shine {
    0%, 100% {
      opacity: 0.3;
      background-position: -100% 0;
    }
    50% {
      opacity: 0.7;
      background-position: 200% 0;
    }
  }
  
  .history-header h2 {
    font-size: 1.25rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    position: relative;
    animation: header-appear 0.5s forwards;
    opacity: 0;
    transform: translateY(10px);
    margin-left: -0.25rem;
  }
  
  @keyframes header-appear {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .history-header h2::before {
    content: '';
    display: inline-block;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: var(--blue);
    animation: pulse-dot 2s infinite;
  }
  
  @keyframes pulse-dot {
    0%, 100% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(75, 94, 252, 0.5);
    }
    50% {
      transform: scale(1.2);
      box-shadow: 0 0 5px 2px rgba(75, 94, 252, 0.3);
    }
  }
  
  .light-mode .history-header h2::before {
    background-color: #2196F3;
  }
  
  .history-actions {
    display: flex;
    gap: 8px;
    animation: actions-appear 0.5s forwards 0.2s;
    opacity: 0;
    transform: translateY(10px);
  }
  
  @keyframes actions-appear {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .history-action {
    background-color: rgba(75, 75, 85, 0.3);
    border: 1px solid rgba(75, 94, 252, 0.2);
    color: var(--text-light-gray);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
    font-size: 0.875rem;
    cursor: pointer;
    padding: 8px 12px;
    border-radius: 12px;
    transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    animation: history-action-glow 2s infinite;
    position: relative;
    overflow: hidden;
  }
  
  @keyframes history-action-glow {
    0%, 100% {
      border-color: rgba(75, 94, 252, 0.2);
      box-shadow: 0 0 10px rgba(75, 94, 252, 0.1);
    }
    50% {
      border-color: rgba(75, 94, 252, 0.4);
      box-shadow: 0 0 15px rgba(75, 94, 252, 0.2);
    }
  }
  
  /* Shine effect for action buttons */
  .history-action::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(
      to bottom right,
      rgba(255, 255, 255, 0) 0%,
      rgba(255, 255, 255, 0) 40%,
      rgba(255, 255, 255, 0.3) 50%,
      rgba(255, 255, 255, 0) 60%,
      rgba(255, 255, 255, 0) 100%
    );
    transition: transform 0.6s ease;
    transform: translateX(-100%) translateY(-100%) rotate(35deg);
    pointer-events: none;
    z-index: 2;
    opacity: 0.6;
  }
  
  .history-action:hover::before {
    transform: translateX(100%) translateY(100%) rotate(35deg);
  }
  
  .light-mode .history-action {
    background-color: rgba(230, 230, 230, 0.6);
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.05), 0 0 10px rgba(33, 150, 243, 0.1);
  }
  
  .history-action:hover {
    background-color: rgba(90, 90, 100, 0.5);
    color: var(--text-dark);
    transform: translateY(-3px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
  }
  
  .history-action:active {
    transform: translateY(1px);
    transition: all 0.1s ease;
  }
  
  .light-mode .history-action:hover {
    background-color: rgba(210, 210, 210, 0.7);
    color: var(--text-light);
  }
  
  .history-action svg {
    width: 16px;
    height: 16px;
    transition: transform 0.2s ease;
  }
  
  .history-action:hover svg {
    transform: scale(1.1);
  }
  
  #clearHistory {
    color: var(--red-light);
    border-color: rgba(255, 82, 82, 0.2);
    animation: danger-action-glow 2s infinite;
  }
  
  @keyframes danger-action-glow {
    0%, 100% {
      border-color: rgba(255, 82, 82, 0.2);
      box-shadow: 0 0 10px rgba(255, 82, 82, 0.1);
    }
    50% {
      border-color: rgba(255, 82, 82, 0.4);
      box-shadow: 0 0 15px rgba(255, 82, 82, 0.2);
    }
  }
  
  #clearHistory:hover {
    color: var(--red);
    border-color: rgba(255, 82, 82, 0.4);
    box-shadow: 0 6px 12px rgba(244, 67, 54, 0.15);
  }
  
  .history-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-height: calc(100% - 70px);
    overflow-y: auto;
    padding-right: 4px;
  }
  
  .history-list::-webkit-scrollbar {
    width: 6px;
  }
  
  .history-list::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .history-list::-webkit-scrollbar-thumb {
    background-color: rgba(150, 150, 150, 0.3);
    border-radius: 10px;
  }
  
  /* History item with animations */
  .history-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background-color: rgba(50, 50, 55, 0.5);
    border-radius: 12px;
    transition: all 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(80, 80, 90, 0.3);
    animation: slide-in 0.4s cubic-bezier(0.25, 1, 0.5, 1), history-item-glow 2s infinite;
    will-change: transform, opacity;
  }
  
  @keyframes history-item-glow {
    0%, 100% {
      border-color: rgba(75, 94, 252, 0.2);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1),
                  0 0 10px rgba(75, 94, 252, 0.1);
    }
    50% {
      border-color: rgba(75, 94, 252, 0.4);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1),
                  0 0 15px rgba(75, 94, 252, 0.2);
    }
  }
  
  /* Animation for new history items */
  @keyframes slide-in {
    0% {
      opacity: 0;
      transform: translateX(40px);
    }
  
    100% {
      opacity: 1;
      transform: translateX(0);
    }
  }
  
  /* Animation for removing history items */
  @keyframes fade-out {
    0% {
      opacity: 1;
      transform: translateX(0) scale(1);
    }
  
    100% {
      opacity: 0;
      transform: translateX(-40px) scale(0.9);
    }
  }
  
  /* Animation for clear all effect */
  @keyframes clear-all {
    0% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  
    100% {
      opacity: 0;
      transform: translateY(20px) scale(0.8);
    }
  }
  
  .history-item.clearing {
    animation: clear-all 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    pointer-events: none;
  }
  
  /* Animation for selecting history items */
  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 rgba(75, 94, 252, 0.4);
    }
  
    70% {
      box-shadow: 0 0 0 10px rgba(75, 94, 252, 0);
    }
  
    100% {
      box-shadow: 0 0 0 0 rgba(75, 94, 252, 0);
    }
  }
  
  .history-item.removing {
    animation: fade-out 0.3s forwards;
    pointer-events: none;
  }
  
  .history-item.selected {
    animation: pulse 1s;
    border-color: var(--blue);
    background-color: rgba(75, 94, 252, 0.08);
  }
  
  .light-mode .history-item {
    background-color: rgba(235, 235, 235, 0.5);
    border: 1px solid rgba(200, 200, 200, 0.3);
  }
  
  .history-content {
    flex-grow: 1;
    padding: 14px;
    cursor: pointer;
    position: relative;
    z-index: 1;
  }
  
  .history-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 4px;
    height: 100%;
    background-color: var(--blue);
    opacity: 0;
    transition: opacity 0.25s ease;
    z-index: 0;
  }
  
  .history-item::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(75, 94, 252, 0), rgba(75, 94, 252, 0.05));
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: 0;
  }
  
  .light-mode .history-item::after {
    background: linear-gradient(135deg, rgba(75, 94, 252, 0), rgba(75, 94, 252, 0.03));
  }
  
  .history-item:hover {
    background-color: rgba(70, 70, 75, 0.7);
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    border-color: rgba(100, 100, 110, 0.5);
  }
  
  .history-item:hover::before {
    opacity: 1;
  }
  
  .history-item:hover::after {
    opacity: 1;
  }
  
  .light-mode .history-item:hover {
    background-color: rgba(225, 225, 225, 0.7);
    border-color: rgba(180, 180, 180, 0.5);
  }
  
  .history-item-delete {
    background: transparent;
    border: 1px solid rgba(255, 82, 82, 0.2);
    color: var(--text-light-gray);
    width: 36px;
    height: 36px;
    border-radius: 50%;
    margin-right: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    opacity: 0;
    transform: scale(0.8);
    transition: all 0.25s ease;
    z-index: 2;
    position: relative;
    animation: delete-button-glow 2s infinite;
  }
  
  @keyframes delete-button-glow {
    0%, 100% {
      border-color: rgba(255, 82, 82, 0.2);
      box-shadow: 0 0 10px rgba(255, 82, 82, 0.1);
    }
    50% {
      border-color: rgba(255, 82, 82, 0.4);
      box-shadow: 0 0 15px rgba(255, 82, 82, 0.2);
    }
  }
  
  .history-item-delete svg {
    width: 16px;
    height: 16px;
  }
  
  .history-item:hover .history-item-delete {
    opacity: 0.8;
    transform: scale(1);
  }
  
  .history-item-delete:hover {
    background-color: rgba(255, 82, 82, 0.1);
    color: var(--red);
    opacity: 1 !important;
  }
  
  .light-mode .history-item-delete:hover {
    background-color: rgba(255, 82, 82, 0.08);
  }
  
  .history-equation {
    color: var(--text-light-gray);
    font-size: 0.875rem;
    margin-bottom: 6px;
    font-family: monospace;
    animation: history-equation-glow 2s infinite;
  }
  
  @keyframes history-equation-glow {
    0%, 100% {
      text-shadow: 0 0 6px rgba(255, 255, 255, 0.1);
    }
    50% {
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
    }
  }
  
  .history-result {
    font-size: 1.25rem;
    font-weight: 500;
    color: var(--blue);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    animation: history-result-glow 2s infinite;
  }
  
  @keyframes history-result-glow {
    0%, 100% {
      text-shadow: 0 0 8px rgba(75, 94, 252, 0.2);
    }
    50% {
      text-shadow: 0 0 12px rgba(75, 94, 252, 0.4);
    }
  }
  
  /* Empty history message */
  .empty-history {
    text-align: center;
    color: var(--text-light-gray);
    padding: 2rem 0;
    font-size: 0.875rem;
  }
  
  /* Responsive Design */
  @media (max-width: 768px) {
    .app-container {
      padding: 0.5rem;
    }
  
    .calculator-container {
      max-width: 100%;
      padding: 1rem;
    }
  
    .history-panel {
      width: 280px;
    }
  }
  
  @media (max-width: 340px) {
    .calculator-container {
      padding: 0.75rem;
    }
  
    .calc-button {
      height: 56px;
      border-radius: 14px;
      font-size: 1.125rem;
    }
  
    .result {
      font-size: 2.25rem;
    }
  
    .history-panel {
      width: 260px;
    }
  }